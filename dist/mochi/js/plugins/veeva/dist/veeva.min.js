/*!
 * Mochi Plugin - Veeva CLM Application v1.0 (https://github.com/codeworksdev/mochi/tree/master/dist/frontend/js/plugins/veeva)
 * Copyright (c) 2014-2018 CODEWORKS <support@codeworksnyc.com>
 * Licensed under the MIT license
 */
$(document).ready(function(){$m.extend('veeva',MochiPlugin__Veeva)});function MochiPlugin__Veeva(){this._options(),this._init()}MochiPlugin__Veeva.prototype={_options:function(){var a={};a.CLM_VERSION='1.0',a.CLM_NAME=$('html title').text(),a.CLM_ID=a.CLM_NAME.replace(/\W/g,'_').toUpperCase()+'_'+a.CLM_VERSION.replace(/\W/g,'_'),a.CLM_SLIDE_PREFIX=a.CLM_ID.toLowerCase()+'_slide',a.CLM_NUMBER_PAD=2,a.CLM_FIRST_SLIDE_NUMBER=0,a.CLM_LAST_SLIDE_NUMBER=0,a.CLM_NAVIGATION=!1,a.CLM_NAVIGATION_THEME=!1,this.default=_.clone(a),this.options=_.clone(a)},_init:function(){_.each(this.options,function(a,g){'CLM_NAVIGATION'===g?a&&this._onOptionChange(g,{from:!1,to:!0}):void 0},this)},_onOptionChange:function(a,g){g.from!==g.to&&('CLM_NAVIGATION'===a?function(i,j){var l=$('#mochi-plugin-veeva-nav');if(!j)l.remove();else{var m=$('<div data-mochi="plugin" id="mochi-plugin-veeva-nav"><span></span><span></span><span></span></div>'),q=m.find('> span');$m.onClick(q.eq(0),function(){$m.veeva.goHome()}),$m.onClick(q.eq(1),function(){$m.veeva.prevSlide()}),$m.onClick(q.eq(2),function(){$m.veeva.nextSlide()}),$m.__body.append(m),i.options.CLM_NAVIGATION_THEME&&i._onOptionChange('CLM_NAVIGATION_THEME',{from:!1,to:!0})}}(this,g.to):'CLM_NAVIGATION_THEME'===a?function(i,j){var l=$('#mochi-plugin-veeva-nav');if(l.length){var m=l.find('> span');j?(m.eq(0).append('<i class="fas fa-home"></i>'),m.eq(1).append('<i class="fas fa-angle-left"></i>'),m.eq(2).append('<i class="fas fa-angle-right"></i>')):m.empty()}}(this,g.to):void 0)},goHome:function(){return this.gotoSlide()},gotoSlide:function(x,p){if(arguments.length||(x=this.options.CLM_FIRST_SLIDE_NUMBER,p=this.options.CLM_ID),/^https?:\/\//.test(x)||/\.(pdf|pptx?)$/i.test(x))this.is_veeva()?document.location.href=x:window.open(x);else{var d=/^\d+(\.\d+)?$/.test(x),n=d?sprintf('%0'+this.options.CLM_NUMBER_PAD+'d'+RegExp.$1,x):x,c=p||this.options.CLM_ID,f=d?this.options.CLM_SLIDE_PREFIX+n:n,v=this.is_veeva(),u=v?'com.veeva.clm.gotoSlide(\''+f+(/\.zip$/.test(f)?'':'.zip')+'\',\''+c+'\')':'document.location.href=\''+f.replace(/\.zip$/,'')+'.html\'';!v&&/([^\/]+)\/([^\/]+)\.html$/.test(document.location.href)&&RegExp.$1==RegExp.$2&&(u=u.replace(/'(.+?)\.html'/,'\'../$1/$1.html\'')),eval(u)}return this},getDefaultOptions:function(a,g){return this.getOptions(a,!0,g)},getOptions:function(a,g,i){var j=g?'default':'options';if(a&&_.isFunction(a)&&(i=a,a=null),!a)return _.isFunction(i)?_.mapObject(_.clone(this[j]),i,this):_.clone(this[j]);if('string'==typeof a&&_.has(this[j],a)){var l=_.isFunction(this[j][a])?this[j][a]():this[j][a];return _.isFunction(i)?i.call(this,l,a,this[j]):l}},is_veeva:function(){try{return /mobile\/containers\/data\/application/i.test(window.location.href)}catch(a){}},nextSlide:function(a){var l,m,g=$m.getPage(),i=this.options.CLM_LAST_SLIDE_NUMBER,j=$m.__body.attr('data-next-page');return /^\d+(\.\d+)?$/.test(j)?l=j:/^(\d+)\.(\d+)$/.test(g)?(m=+RegExp.$2+1,l=RegExp.$1+'.'+m):l=+g+1,this.gotoSlide(l<i?l:i,a)},prevSlide:function(a){var l,m,g=$m.getPage(),i=this.options.CLM_FIRST_SLIDE_NUMBER,j=$m.__body.attr('data-prev-page');return /^\d+(\.\d+)?$/.test(j)?l=j:/^(\d+)\.(\d+)$/.test(g)?(m=+RegExp.$2-1,l=m>i?RegExp.$1+'.'+m:RegExp.$1):l=+g-1,this.gotoSlide(l<i?i:l,a)},setOptions:function(a,g){var i;return arguments.length?_.isFunction(a)?(i=_.clone(this.default),g=a):i=_.clone($m.isSimpleObj(a)?a:this.default):i=_.clone(this.default),_.each(i,function(j,l){_.has(this.options,l)&&(this._onOptionChange(l,{from:this.options[l],to:j}),this.options[l]=j)},this),g&&_.isFunction(g)&&g.call(this,i),this}};
