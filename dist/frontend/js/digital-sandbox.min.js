/*!
 * Digital Sandbox v1.4 (https://github.com/codeworksdev/digital-sandbox)
 * Copyright (c) 2014-2017 CODEWORKS <guru@codeworksnyc.com>
 * Licensed under the MIT license
 */
function Mochi_Page0_load(){}function DigitalSandboxWrapper(){this._vars(),this._toolbar(),this._init()}function DigitalSandboxApps(){this._vars()}function DigitalSandboxToolbar(){this._options(),this._html(),this._vars()}function DigitalSandboxDevice(){this._options(),this._html(),this._vars()}Mochi_onMutation=function(t){},Mochi_init=function(){this.setOption("ENABLE_SERVICE_WORKER",!1)},$(document).ready(function(t){switch(Number($m.getView())){case 0:$m.extend("wrapper",DigitalSandboxWrapper,function(){this.onload()});break;case 1:$m.extend("apps",DigitalSandboxApps,function(){this.onload()})}}),DigitalSandboxWrapper.prototype={_vars:function(){if(this.ver={date:"2017-10-09",number:"1.4",product:"Digital Sandbox",type:"final"},this.ver.str=this.ver.product+" v"+this.ver.number+"-"+this.ver.date.replace(/\D/g,"")+"-"+this.ver.type,this.href=decodeURI(window.location.href),this.url={},this.iframe=$("#inner-content > iframe"),/^([^\?]+)(?:\?([^\?>]*))?(?:>(([a-z]\w*)(?::([lp]))?))?$/.test(this.href))switch(this.url.dir=RegExp.$1,this.url.query=RegExp.$2,this.url.device=RegExp.$4,this.url.orientation=RegExp.$5,this.url.type=/^https?:\/\//i.test(this.url.query)?"ext":"int",this.url.src="./apps.html",this.url.type){case"ext":this.url.src=this.url.query;break;case"int":/^([\w-\.:]+)(?:\/([\w-\.:]*))?$/.test(this.url.query)&&(this.url.index=RegExp.$2||"index",this.url.app=RegExp.$1.replace(/\:/g,"/"),this.url.ext="html",this.url.src="./frontend/apps/"+this.url.app+"/"+this.url.index+"."+this.url.ext)}},_toolbar:function(){$m.extend("toolbar",DigitalSandboxToolbar,function(){this.onload()})},_init:function(){this.iframe.attr("src",this.url.src)},onload:function(){if(this.url.device){var t='[data-button="'+this.url.device+'"]',i=$m.device.inner.find(t);$m.device.select(i.get(0))}return this.url.orientation&&$m.device.rotate(this.url.orientation),this}},DigitalSandboxApps.prototype={_vars:function(){this.container=$m.__content.find("#apps"),this.cols=this.container.find('.row > [class^="col-"][data-widgetize="yes"]'),this.widget=this.container.attr("data-widget")},onload:function(){this.cols.each(function(t){$m.apps.widget&&/^\w+$/.test($m.apps.widget)&&$m.apps["widget_"+$m.apps.widget](this,t)})},widget_accordion:function(t,i){for(var n,e="accordion"+i,a=['<div class="panel-group" id="'+e+'" role="tablist" aria-multiselectable="true">',"</div>"],o=(t=$(t)).find("ul[title]"),r=[],i=0;n=o[i++];)r.push(this.widget_accordion_group2html(n,e,i));t.html(a[0]+r.join("")+a[1])},widget_accordion_group2html:function(t,i,n){for(var e,a=$(t),o=0,r=a.length,s=[];o<r;)(e={}).container=$(a[o++]),e.title=e.container.attr("title"),e.apps=e.container.find("a[href]"),e.n=n,s.push('<div class="panel panel-default"><div class="panel-heading" role="tab" id="'+i+"-heading"+e.n+'"><h4 class="panel-title"><a class="collapsed" role="button" data-toggle="collapse" data-parent="#'+i+'" href="#'+i+"-collapse"+e.n+'" aria-expanded="false" aria-controls="'+i+"-collapse"+e.n+'">'+e.title+'</a></h4></div><div id="'+i+"-collapse"+e.n+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="'+i+"-heading"+e.n+'"><div class="panel-body"><table class="table table-striped table-condensed"><tbody>'),_.each(e.apps,function(t){var i=function(t){return/^\.\/\?(.+)$/.test(t)?"./index.html?"+RegExp.$1:t}((t=$(t)).attr("href"));s.push('<tr><td><a target="'+(t.attr("target")?t.attr("target"):"_top")+'" title="'+t.text()+'" href="'+i+'">'+t.html()+'</a></td><td class="text-right"><a target="_top" title="Launch" href="'+i+'"><i class="fa fa-fw fa-external-link"></i></a></td></tr>')}),s.push("</tbody></table></div></div></div>");return s.join("")}},DigitalSandboxToolbar.prototype={_options:function(){this.options={buttons:{refresh:"Refresh Window",qrefresh:"Quick Refresh",reload:"Refresh App",device:"Device Mode",rotate:"Orientation",launch:"Index",about:"About",collapse:"Collapse/Expand"}}},_html:function(){$m.__container.prepend('<div id="toolbar"><div id="inner-toolbar"></div></div>'),_.each(this.options.buttons,function(t,i){$("#inner-toolbar").append('<div data-button="'+i+'" title="'+t+'"></div>')})},_vars:function(){this.container=$("#toolbar"),this.inner=$("#inner-toolbar"),this.buttons=this.container.find("[data-button]")},onload:function(){return _.each(this.options.buttons,function(t,i){switch(i){case"device":$m.extend(i,DigitalSandboxDevice,function(){this.onload()})}}),$m.onClick($("#inner-toolbar").find("> [data-button]"),function(){$m.toolbar.select(this)}),this},select:function(t){var i=_.isElement(t)?$(t):t,n=i.attr("data-button");return this["do"+window.s.capitalize(n)](i),this},toggleCollapse:function(){var t="data-collapsed",i="yes"==this.container.attr(t)?"no":"yes";return this.container.attr(t,i),this},doRefresh:function(t){window.location.reload(!0)},doReload:function(t){$m.wrapper.iframe.attr("src",$m.wrapper.iframe.attr("src"))},doQrefresh:function(t){try{$m.wrapper.iframe[0].contentWindow.location.reload()}catch(t){alert("This feature is not available in offline mode.")}},doLaunch:function(t){window.location.href=window.location.href.replace(/^([^\?]+)(\?.*)?$/,"$1"),$m.wrapper.iframe.attr("src","./apps.html")},doDevice:function(t){$m.device.open(t)},doRotate:function(t){$m.device.rotate()},doAbout:function(t){alert($m.wrapper.ver.str)},doCollapse:function(t){$m.toolbar.toggleCollapse()}},DigitalSandboxDevice.prototype={_options:function(){this.options={buttons:{default:"Default",fullscreen:"Full Screen",ipad:"iPad",ipad_air:"iPad Air",ipad_mini:"iPad Mini",ipad_pro_9_7:"iPad Pro 9.7-inch",ipad_pro_12_9:"iPad Pro 12.9-inch",iphone_5s:"iPhone 5",iphone_6plus:"iPhone 6 Plus",galaxy_s5:"Galaxy S5",nexus_7:"Nexus 7",nexus_10:"Nexus 10"},container_id:"device-menu"}},_html:function(){$m.toolbar.inner.find('[data-button="device"]').append('<div id="'+this.options.container_id+'"><div id="inner-'+this.options.container_id+'"><span data-action="exit"></span></div></div>')},_vars:function(){this.container=$("#"+this.options.container_id),this.inner=$("#inner-"+this.options.container_id)},onload:function(){return _.each(this.options.buttons,function(t,i){var n="#inner-"+$m.device.options.container_id;switch($(n).append('<span data-button="'+i+'"><span>'+t+"</span></span>"),i){case"default":$(n+' [data-button="'+i+'"]').addClass("selected")}}),$m.onClick(this.inner.find("[data-button]"),function(){$m.device.select(this)}),$m.onClick(this.inner.find("[data-action]"),function(){$m.device.action(this)}),this},select:function(t){var i=_.isElement(t)?$(t):t;if(i.length){var n=i.attr("data-button"),e="selected";i.hasClass(e)||(this.inner.find('[data-button="'+n+'"]').addClass(e),this.inner.find(':not([data-button="'+n+'"])').removeClass(e),$m.__body.attr("data-device",n))}return this},action:function(t){return this[(_.isElement(t)?$(t):t).attr("data-action")](),this},rotate:function(t){var i,n,e="data-orientation";return n=/^[lp]$/.test(t)?t:(i=$m.__body.attr(e))&&"l"==i?"p":"l",$m.__body.attr(e,n),this},open:function(){return this.container.hasClass("open")||this.container.addClass("open"),this},close:function(){return this.container.removeClass("open"),this},exit:function(){return setTimeout(function(){$m.device.close()},50),this}};
