/*!
 * Mochi v1.3.3 (https://github.com/codeworksdev/mochi)
 * Copyright (c) 2014-2017 CODEWORKS <support@codeworksnyc.com>
 * Licensed under the MIT license
 */
function Mochi(){this._options(),this._vars(),this._observer(),this._html(),this._body(),this._init()}function MochiException(a){this.message=a,this.type="MochiException"}$(document).ready(function(){window.$m=new Mochi}),Mochi.prototype={_options:function(){this.options={CLICK_NAME:"auto",ENABLE_SERVICE_WORKER:!1}},_vars:function(){this.__href=window.location.href,this.__html=$("html"),this.__body=$("body"),this.__container=this.__body.find("#container"),this.__content=this.__body.find("#content"),this.__page_name=/[\\\/]([^\\\\\/\?]+)(\?.*)?$/.test(this.__href)?RegExp.$1.replace(/\.[^\.]+$/,""):"index",this.__reserved=["cache","container","content","do","extend","getOnClickName","getOption","getPage","getState","getView","load","loadPage","loadView","onClick","onPageChange","onStateChange","onViewChange","options","sanitizeTitle","setOnClickName","setOption","setPage","setState","setView","unload","unloadPage","unloadView"],this.__observer=new MutationObserver(function(a){a.forEach($m._onMutation)})},_observer:function(){this.__observer.observe(this.__container.get(0),{attributes:!0,childList:!0,characterData:!0})},_html:function(){var a=this.__html,b=a.attr("data-page"),c=a.attr("data-view"),d=new RegExp(/^\d+(\.\d+)?$/);d.test(b)||a.attr("data-page",0),d.test(c)||a.attr("data-view",0)},_body:function(){this.__body.addClass("is-page-"+this.sanitizeTitle(this.__page_name))},_init:function(){this.do("Mochi_init").do("Mochi_Page"+this.getPage()+"_load").do("Mochi_View"+this.getView()+"_load").do("Mochi_last"),this.options.ENABLE_SERVICE_WORKER&&"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(a){console.log("ServiceWorker registration successful with scope: "+a.scope)}).catch(function(a){console.log("ServiceWorker registration failed: "+a)})},_onMutation:function(a){"function"==typeof window.Mochi_onMutation&&Mochi_onMutation.call(this,a)},cache:function(a,b,c){var d=new Image(b,c);return d.src=a,d},container:function(){return this.__body.find("#container")},content:function(){return this.__body.find("#content")},do:function(f){var x=this.sanitizeTitle(f,"_");return/^\w+$/.test(x)&&eval('if(_.isFunction(window["'+x+'"]))window["'+x+'"].call(this);'),this},getOnClickName:function(){var a=this.getOption("CLICK_NAME");return"auto"==a?this.__html.hasClass("no-touchevents")?"click":"touchstart":a},getOption:function(a){return this.options[a]},getPage:function(a){return this.getState("Page",a)},getState:function(a,b){return window.s.pad(this.__html.attr("data-"+a.toLowerCase()),b?b:0,"0")},getView:function(a){return this.getState("View",a)},load:function(a,b){return/^\w+$/.test(a)&&/^\d+$/.test(b)?this.do("Mochi_"+a+b+"_load"):this},loadPage:function(a){return this.load("Page",a)},loadView:function(a){return this.load("View",a)},onPageChange:function(a){return this.onStateChange("Page",a)},onStateChange:function(a,b){return this["unload"+a](b),this["load"+a](this.__html.attr("data-"+a.toLowerCase()))},onViewChange:function(a){return this.onStateChange("View",a)},unload:function(a,b){return/^\w+$/.test(a)&&/^\d+$/.test(b)?this.do("Mochi_"+a+b+"_unload"):this},unloadPage:function(a){return this.unload("Page",a)},unloadView:function(a){return this.unload("View",a)},sanitizeTitle:function(a,b){return a.replace(/[^a-z\d]/gi,null==b?"-":b)},setOnClickName:function(a){return this.setOption("CLICK_NAME",a)},setOption:function(a,b){if(a&&/^[a-z]\w*$/i.test(a))return this.options[a]=b,!0},setPage:function(a,b){return this.setState("Page",a,b)},setView:function(a,b){return this.setState("View",a,b)},extend:function(k,c,f){if(!/^[a-z]\w*$/i.test(k)||$.inArray(k,this.__reserved)!=-1)throw new MochiException('Cannot extend as "'+k+'". Name reserved or unsupported.');return eval("this[k] = new c(c.mochi=this)"),f&&f.call(this[k]),this},onClick:function(a,b,c){var d,e=this.getOnClickName(),f=_.isFunction(b),g=f?{}:b,h=f?b:c;switch(typeof a){case"string":d=$(a);break;default:d=_.isElement(a)?$(a):a}return d.on(e,g,h)},setState:function(a,b,c){if(/^\d+$/.test(b)&&(c||b!=this["get"+a]())){var d="data-"+a.toLowerCase(),e=this.__html.attr(d),f=b;return this.__html.attr(d,f),this["on"+a+"Change"](e)}return this}};
