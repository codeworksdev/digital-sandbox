/*! iScroll v5.2.0-snapshot ~ (c) 2008-2017 Matteo Spinelli ~ http://cubiq.org/license */
(function(a,d,g){function h(n,o){for(var p in this.wrapper='string'==typeof n?d.querySelector(n):n,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={disablePointer:!m.hasPointer,disableTouch:m.hasPointer||!m.hasTouch,disableMouse:m.hasPointer||m.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:'',preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:'undefined'==typeof a.onmousedown},o)this.options[p]=o[p];this.translateZ=this.options.HWCompositing&&m.hasPerspective?' translateZ(0)':'',this.options.useTransition=m.hasTransition&&this.options.useTransition,this.options.useTransform=m.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?'vertical':this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY='vertical'!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX='horizontal'!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing='string'==typeof this.options.bounceEasing?m.ease[this.options.bounceEasing]||m.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap='tap'),this.options.useTransition||this.options.useTransform||/relative|absolute/i.test(this.scrollerStyle.position)||(this.scrollerStyle.position='relative'),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}var j=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(n){a.setTimeout(n,1e3/60)},m=function(){function n(s){return!1!==q&&(''===q?s:q+s.charAt(0).toUpperCase()+s.substr(1))}var o={},p=d.createElement('div').style,q=function(){for(var t,s=['t','webkitT','MozT','msT','OT'],u=0,v=s.length;u<v;u++)if(t=s[u]+'ransform',t in p)return s[u].substr(0,s[u].length-1);return!1}();o.getTime=Date.now||function(){return new Date().getTime()},o.extend=function(s,t){for(var u in t)s[u]=t[u]},o.addEvent=function(s,t,u,v){s.addEventListener(t,u,!!v)},o.removeEvent=function(s,t,u,v){s.removeEventListener(t,u,!!v)},o.prefixPointerEvent=function(s){return a.MSPointerEvent?'MSPointer'+s.charAt(7).toUpperCase()+s.substr(8):s},o.momentum=function(s,t,u,v,w,z){var C,D,A=s-t,B=g.abs(A)/u;return z=void 0===z?6e-4:z,C=s+B*B/(2*z)*(0>A?-1:1),D=B/z,C<v?(C=w?v-w/2.5*(B/8):v,A=g.abs(C-s),D=A/B):0<C&&(C=w?w/2.5*(B/8):0,A=g.abs(s)+C,D=A/B),{destination:g.round(C),duration:D}};var r=n('transform');return o.extend(o,{hasTransform:!1!==r,hasPerspective:n('perspective')in p,hasTouch:'ontouchstart'in a,hasPointer:!!(a.PointerEvent||a.MSPointerEvent),hasTransition:n('transition')in p}),o.isBadAndroid=function(){var s=a.navigator.appVersion;if(/Android/.test(s)&&!/Chrome\/\d/.test(s)){var t=s.match(/Safari\/(\d+.\d)/);return t&&'object'==typeof t&&2<=t.length?535.19>parseFloat(t[1]):!0}return!1}(),o.extend(o.style={},{transform:r,transitionTimingFunction:n('transitionTimingFunction'),transitionDuration:n('transitionDuration'),transitionDelay:n('transitionDelay'),transformOrigin:n('transformOrigin'),touchAction:n('touchAction')}),o.hasClass=function(s,t){var u=new RegExp('(^|\\s)'+t+'(\\s|$)');return u.test(s.className)},o.addClass=function(s,t){if(!o.hasClass(s,t)){var u=s.className.split(' ');u.push(t),s.className=u.join(' ')}},o.removeClass=function(s,t){if(o.hasClass(s,t)){var u=new RegExp('(^|\\s)'+t+'(\\s|$)','g');s.className=s.className.replace(u,' ')}},o.offset=function(s){for(var t=-s.offsetLeft,u=-s.offsetTop;s=s.offsetParent;)t-=s.offsetLeft,u-=s.offsetTop;return{left:t,top:u}},o.preventDefaultException=function(s,t){for(var u in t)if(t[u].test(s[u]))return!0;return!1},o.extend(o.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),o.extend(o.ease={},{quadratic:{style:'cubic-bezier(0.25, 0.46, 0.45, 0.94)',fn:function(s){return s*(2-s)}},circular:{style:'cubic-bezier(0.1, 0.57, 0.1, 1)',fn:function(s){return g.sqrt(1- --s*s)}},back:{style:'cubic-bezier(0.175, 0.885, 0.32, 1.275)',fn:function(s){var t=4;return--s*s*((t+1)*s+t)+1}},bounce:{style:'',fn:function(s){return(s/=1)<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+0.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+0.9375:7.5625*(s-=2.625/2.75)*s+0.984375}},elastic:{style:'',fn:function(s){var t=0.22;return 0===s?0:1==s?1:0.4*g.pow(2,-10*s)*g.sin((s-t/4)*(2*g.PI)/t)+1}}}),o.tap=function(s,t){var u=d.createEvent('Event');u.initEvent(t,!0,!0),u.pageX=s.pageX,u.pageY=s.pageY,s.target.dispatchEvent(u)},o.click=function(s){var u,t=s.target;/(SELECT|INPUT|TEXTAREA)/i.test(t.tagName)||(u=d.createEvent(a.MouseEvent?'MouseEvents':'Event'),u.initEvent('click',!0,!0),u.view=s.view||a,u.detail=1,u.screenX=t.screenX||0,u.screenY=t.screenY||0,u.clientX=t.clientX||0,u.clientY=t.clientY||0,u.ctrlKey=!!s.ctrlKey,u.altKey=!!s.altKey,u.shiftKey=!!s.shiftKey,u.metaKey=!!s.metaKey,u.button=0,u.relatedTarget=null,u._constructed=!0,t.dispatchEvent(u))},o.getTouchAction=function(s,t){var u='none';return'vertical'===s?u='pan-y':'horizontal'==s&&(u='pan-x'),t&&'none'!=u&&(u+=' pinch-zoom'),u},o.getRect=function(s){if(s instanceof SVGElement){var t=s.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:s.offsetTop,left:s.offsetLeft,width:s.offsetWidth,height:s.offsetHeight}},o}();h.prototype={version:'5.2.0-snapshot',_init:function(){this._initEvents()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent('destroy')},_transitionEnd:function(n){n.target==this.scroller&&this.isInTransition&&(this._transitionTime(),!this.resetPosition(this.options.bounceTime)&&(this.isInTransition=!1,this._execEvent('scrollEnd')))},_start:function(n){if(1!=m.eventType[n.type]){var o;if(o=n.which?n.button:2>n.button?0:4==n.button?1:2,0!==o)return}if(this.enabled&&(!this.initiated||m.eventType[n.type]===this.initiated)){!this.options.preventDefault||m.isBadAndroid||m.preventDefaultException(n.target,this.options.preventDefaultException)||n.preventDefault();var q,p=n.touches?n.touches[0]:n;this.initiated=m.eventType[n.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=m.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,q=this.getComputedPosition(),this._translate(g.round(q.x),g.round(q.y)),this._execEvent('scrollEnd')):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent('scrollEnd')),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=p.pageX,this.pointY=p.pageY,this._execEvent('beforeScrollStart')}},_move:function(n){if(this.enabled&&m.eventType[n.type]===this.initiated){this.options.preventDefault&&n.preventDefault();var s,t,u,v,o=n.touches?n.touches[0]:n,p=o.pageX-this.pointX,q=o.pageY-this.pointY,r=m.getTime();if(this.pointX=o.pageX,this.pointY=o.pageY,this.distX+=p,this.distY+=q,u=g.abs(this.distX),v=g.abs(this.distY),!(300<r-this.endTime&&10>u&&10>v)){if(this.directionLocked||this.options.freeScroll||(u>v+this.options.directionLockThreshold?this.directionLocked='h':v>=u+this.options.directionLockThreshold?this.directionLocked='v':this.directionLocked='n'),'h'==this.directionLocked){if('vertical'==this.options.eventPassthrough)n.preventDefault();else if('horizontal'==this.options.eventPassthrough)return void(this.initiated=!1);q=0}else if('v'==this.directionLocked){if('horizontal'==this.options.eventPassthrough)n.preventDefault();else if('vertical'==this.options.eventPassthrough)return void(this.initiated=!1);p=0}p=this.hasHorizontalScroll?p:0,q=this.hasVerticalScroll?q:0,s=this.x+p,t=this.y+q,(0<s||s<this.maxScrollX)&&(s=this.options.bounce?this.x+p/3:0<s?0:this.maxScrollX),(0<t||t<this.maxScrollY)&&(t=this.options.bounce?this.y+q/3:0<t?0:this.maxScrollY),this.directionX=0<p?-1:0>p?1:0,this.directionY=0<q?-1:0>q?1:0,this.moved||this._execEvent('scrollStart'),this.moved=!0,this._translate(s,t),300<r-this.startTime&&(this.startTime=r,this.startX=this.x,this.startY=this.y)}}},_end:function(n){if(this.enabled&&m.eventType[n.type]===this.initiated){this.options.preventDefault&&!m.preventDefaultException(n.target,this.options.preventDefaultException)&&n.preventDefault();var p,q,o=n.changedTouches?n.changedTouches[0]:n,r=m.getTime()-this.startTime,s=g.round(this.x),t=g.round(this.y),u=g.abs(s-this.startX),v=g.abs(t-this.startY),w=0,z='';if(this.isInTransition=0,this.initiated=0,this.endTime=m.getTime(),!this.resetPosition(this.options.bounceTime))return(this.scrollTo(s,t),!this.moved)?(this.options.tap&&m.tap(n,this.options.tap),this.options.click&&m.click(n),void this._execEvent('scrollCancel')):this._events.flick&&200>r&&100>u&&100>v?void this._execEvent('flick'):(this.options.momentum&&300>r&&(p=this.hasHorizontalScroll?m.momentum(this.x,this.startX,r,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0},q=this.hasVerticalScroll?m.momentum(this.y,this.startY,r,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:t,duration:0},s=p.destination,t=q.destination,w=g.max(p.duration,q.duration),this.isInTransition=1),s!=this.x||t!=this.y?((0<s||s<this.maxScrollX||0<t||t<this.maxScrollY)&&(z=m.ease.quadratic),void this.scrollTo(s,t,w,z)):void this._execEvent('scrollEnd'))}},_resize:function(){var n=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){n.refresh()},this.options.resizePolling)},resetPosition:function(n){var o=this.x,p=this.y;return(n=n||0,!this.hasHorizontalScroll||0<this.x?o=0:this.x<this.maxScrollX&&(o=this.maxScrollX),!this.hasVerticalScroll||0<this.y?p=0:this.y<this.maxScrollY&&(p=this.maxScrollY),o!=this.x||p!=this.y)&&(this.scrollTo(o,p,n,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){m.getRect(this.wrapper),this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight;var n=m.getRect(this.scroller);this.scrollerWidth=n.width,this.scrollerHeight=n.height,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&0>this.maxScrollX,this.hasVerticalScroll=this.options.scrollY&&0>this.maxScrollY,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,m.hasPointer&&!this.options.disablePointer&&(this.wrapper.style[m.style.touchAction]=m.getTouchAction(this.options.eventPassthrough,!0),!this.wrapper.style[m.style.touchAction]&&(this.wrapper.style[m.style.touchAction]=m.getTouchAction(this.options.eventPassthrough,!1))),this.wrapperOffset=m.offset(this.wrapper),this._execEvent('refresh'),this.resetPosition()},on:function(n,o){this._events[n]||(this._events[n]=[]),this._events[n].push(o)},off:function(n,o){if(this._events[n]){var p=this._events[n].indexOf(o);-1<p&&this._events[n].splice(p,1)}},_execEvent:function(n){if(this._events[n]){var o=0,p=this._events[n].length;if(p)for(;o<p;o++)this._events[n][o].apply(this,[].slice.call(arguments,1))}},scrollBy:function(n,o,p,q){n=this.x+n,o=this.y+o,p=p||0,this.scrollTo(n,o,p,q)},scrollTo:function(n,o,p,q){q=q||m.ease.circular,this.isInTransition=this.options.useTransition&&0<p;var r=this.options.useTransition&&q.style;!p||r?(r&&(this._transitionTimingFunction(q.style),this._transitionTime(p)),this._translate(n,o)):this._animate(n,o,p,q.fn)},scrollToElement:function(n,o,p,q,r){if(n=n.nodeType?n:this.scroller.querySelector(n),!!n){var s=m.offset(n);s.left-=this.wrapperOffset.left,s.top-=this.wrapperOffset.top;var t=m.getRect(n),u=m.getRect(this.wrapper);!0===p&&(p=g.round(t.width/2-u.width/2)),!0===q&&(q=g.round(t.height/2-u.height/2)),s.left-=p||0,s.top-=q||0,s.left=0<s.left?0:s.left<this.maxScrollX?this.maxScrollX:s.left,s.top=0<s.top?0:s.top<this.maxScrollY?this.maxScrollY:s.top,o=void 0===o||null===o||'auto'===o?g.max(g.abs(this.x-s.left),g.abs(this.y-s.top)):o,this.scrollTo(s.left,s.top,o,r)}},_transitionTime:function(n){if(this.options.useTransition){n=n||0;var o=m.style.transitionDuration;if(o&&(this.scrollerStyle[o]=n+'ms',!n&&m.isBadAndroid)){this.scrollerStyle[o]='0.0001ms';var p=this;j(function(){'0.0001ms'===p.scrollerStyle[o]&&(p.scrollerStyle[o]='0s')})}}},_transitionTimingFunction:function(n){this.scrollerStyle[m.style.transitionTimingFunction]=n},_translate:function(n,o){this.options.useTransform?this.scrollerStyle[m.style.transform]='translate('+n+'px,'+o+'px)'+this.translateZ:(n=g.round(n),o=g.round(o),this.scrollerStyle.left=n+'px',this.scrollerStyle.top=o+'px'),this.x=n,this.y=o},_initEvents:function(n){var o=n?m.removeEvent:m.addEvent,p=this.options.bindToWrapper?this.wrapper:a;o(a,'orientationchange',this),o(a,'resize',this),this.options.click&&o(this.wrapper,'click',this,!0),this.options.disableMouse||(o(this.wrapper,'mousedown',this),o(p,'mousemove',this),o(p,'mousecancel',this),o(p,'mouseup',this)),m.hasPointer&&!this.options.disablePointer&&(o(this.wrapper,m.prefixPointerEvent('pointerdown'),this),o(p,m.prefixPointerEvent('pointermove'),this),o(p,m.prefixPointerEvent('pointercancel'),this),o(p,m.prefixPointerEvent('pointerup'),this)),m.hasTouch&&!this.options.disableTouch&&(o(this.wrapper,'touchstart',this),o(p,'touchmove',this),o(p,'touchcancel',this),o(p,'touchend',this)),o(this.scroller,'transitionend',this),o(this.scroller,'webkitTransitionEnd',this),o(this.scroller,'oTransitionEnd',this),o(this.scroller,'MSTransitionEnd',this)},getComputedPosition:function(){var o,p,n=a.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[m.style.transform].split(')')[0].split(', '),o=+(n[12]||n[4]),p=+(n[13]||n[5])):(o=+n.left.replace(/[^-\d.]/g,''),p=+n.top.replace(/[^-\d.]/g,'')),{x:o,y:p}},_animate:function(n,o,p,q){function r(){var A,B,C,z=m.getTime();return z>=v+p?(s.isAnimating=!1,s._translate(n,o),void(s.resetPosition(s.options.bounceTime)||s._execEvent('scrollEnd'))):void(z=(z-v)/p,C=q(z),A=(n-t)*C+t,B=(o-u)*C+u,s._translate(A,B),s.isAnimating&&j(r))}var s=this,t=this.x,u=this.y,v=m.getTime();this.isAnimating=!0,r()},handleEvent:function(n){switch(n.type){case'touchstart':case'pointerdown':case'MSPointerDown':case'mousedown':this._start(n);break;case'touchmove':case'pointermove':case'MSPointerMove':case'mousemove':this._move(n);break;case'touchend':case'pointerup':case'MSPointerUp':case'mouseup':case'touchcancel':case'pointercancel':case'MSPointerCancel':case'mousecancel':this._end(n);break;case'orientationchange':case'resize':this._resize();break;case'transitionend':case'webkitTransitionEnd':case'oTransitionEnd':case'MSTransitionEnd':this._transitionEnd(n);break;case'wheel':case'DOMMouseScroll':case'mousewheel':this._wheel(n);break;case'keydown':this._key(n);break;case'click':this.enabled&&!n._constructed&&(n.preventDefault(),n.stopPropagation());}}},h.utils=m,'undefined'!=typeof module&&module.exports?module.exports=h:'function'==typeof define&&define.amd?define(function(){return h}):a.IScroll=h})(window,document,Math);
